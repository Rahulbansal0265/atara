
<% if(session.type==1){ %>
    <%-include('../partials/header')%>
<%}else{%>
    <%- include ("../subAdmin/partials/header") %>
<%}%>

    <div class="page-container">

    <div class="page-content">

        <% if(session.type==1){ %>
            <%-include('../partials/sidebar')%>
        <%}else{%>
            <%- include ("../subAdmin/partials/sidebar") %>
        <%}%>

        

        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"> -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.9/dist/flatpickr.min.css">
        <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.9/dist/flatpickr.min.js"></script>
            <style>
                .show-tick{
                    width: 800px !important;
                }
                .img-frame {
                box-shadow: 3px 3px 6px rgba(0, 0, 0, .15);
                /* background: #ee0; */
                margin: 20px auto;
                }

                /* This is for responsive container with specified aspect ratio */
                .aspect-ratio {
                position: relative;
                }
                .aspect-ratio-1-1 {
                padding-bottom: 100%;
                }
                .aspect-ratio-4-3 {
                    padding-bottom: 9%;
                    padding-left: 12%;
                }
                .aspect-ratio-16-9 {
                padding-bottom: 56.25%;
                }

                /* This is the key part - position and fit the image to the container */
                .fit-img {
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0;
                margin: auto;
                max-width: 80%;
                max-height: 90%
                }
                /* .fit-img-bottom {
                top: auto;
                } */
                .fit-img-tight {
                max-width: 100%;
                max-height: 100%
                }
            </style>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcB0EK0YBcZuWn6rRChLh19UVI5YFU2HM&libraries=places"></script>

        <div class="content-wrapper">

            <!-- Page header -->
            <div class="page-header page-header-default">
                <div class="page-header-content">
                    <div class="page-title">
                        <h4>
                            <a href="javascript:history.go(-1);"><i
                                    class="icon-arrow-left52 position-left"></i></a><span
                                class="text-semibold">Home</span> - Business</h4>
                    </div>

                </div>

            </div>
            <!-- /page header -->

            <!-- Content area -->
            <div class="content">

                <div class="panel panel-flat">
                
                    <div class="panel-body">

                        <form id="categoryvalidation"  name='register-form' class="form-horizontal" action="/businesses/addEditPost"
                            enctype="multipart/form-data" method="post">
                            <input type="hidden" name="id" value="<%= Object.keys(businessObj).length>0 && businessObj.id?businessObj.id:"" %>">
                            <fieldset class="content-group">
                                <legend class="text-bold"><%= Object.keys(businessObj).length>0?"Edit Business":"Add Business" %></legend>

                                <div class="form-group">
                                    <label class="control-label col-lg-2" for="pro ">Choose Professionals <span
                                            class="text-danger">*</span> </label>
                                    <div class="col-lg-10">
                                        <select class="form-control " data-placeholder="Choose professionals..."  name="pro_id" id="pro_id">
                                                <option disabled="disabled" selected="selected">Please select</option>
                                                <% for(let i in users){ %>
                                                    <option class="dropdown-item" value="<%= users[i].id %>" <%= businessObj.pro_id==users[i].id?"selected":"" %>><%= users[i].full_name %></option>
                                                <% } %>
                                        </select>
                                        <div class="pro_div_error error"></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Business Name<span
                                            class="text-danger">*</span></label>
                                    <div class="col-lg-10">
                                        <input type="text" name="name" id="name" value="<%= Object.keys(businessObj).length>0 && businessObj.name?businessObj.name:"" %>" class="form-control"
                                            placeholder="Enter business name" >
                                            <div class="name_div_error error"></div>
                                    </div> 
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-lg-2">Location<span
                                            class="text-danger">*</span></label>
                                    <div class="col-lg-10">
                                        <input type="text" name="location" id="location" class="form-control"
                                            placeholder="Enter location" required value="<%= Object.keys(businessObj).length>0 && businessObj.location?businessObj.location:"" %>" >

                                            <input type="hidden" name="lat" id="lat">
                                            <input type="hidden" name="lng" id="lng">
                                    </div>
                                </div>

                                
                               
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Description<span
                                            class="text-danger">*</span></label>
                                    <div class="col-lg-10">

                                            <textarea class="form-control" id="description" name="description" cols="80"label="description" rows="5" wrap="virtual"><%= Object.keys(businessObj).length>0 && businessObj.description?businessObj.description:"" %></textarea>
                                            <div class="description_div_error error"></div>
                                    </div>
                                </div>
                                <!-- <div class="form-group">
                                    <label class="control-label col-lg-2" for="pro ">Choose Category :</label>
                                    <div class="col-lg-10">

                                        <select class="form-control js-example-basic-multiple" data-placeholder="Choose professionals..."  name="category_id" multiple>
                                            <% for(let i in categories){ %>
                                                <option class="dropdown-item" value="<%= categories[i].id%>"  <%= newArr.includes(categories[i].id) ? "selected":"" %>>
                                                    <%=categories[i].name%>
                                                </option>
                                            <% } %>
                                        </select>
                                        <div class="category_id_div error"></div>
                                    </div>
                                </div> -->

                                    <div class="form-group">
                                        <label class="control-label col-lg-2" for="pro ">Choose Category :</label>
                                        <div class="col-lg-10">
                                            <select name="category_id" id="category_id" class="selectpicker" multiple data-live-search="true">
                                            <% for(let i in categories){ %>
                                                <option value="<%= categories[i].id%>" <%=newArr.includes(categories[i].id) ? "selected" :""
                                                    %>>
                                                    <%=categories[i].name%>
                                                </option>
                                                <% } %>
                                            </select>
                                            <div class="category_id_div error"></div>
                                        </div>
                                    </div>
                                

                            

                                <div>
                                    <div class="form-group ">
                                    <label class="control-label col-lg-2">Sunday<span
                                        class="text-danger"></span></label>
                                    <div class="col-lg-5 ">
                                        
                                        <label class="control-label col-lg-12">Open Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="sunday" id="open_time_0" class="form-control contact-method"
                                            placeholder="Enter open time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Sunday !== 'undefined'?businessObj.Sunday.open_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Sunday !== 'undefined' &&
                                            businessObj.Sunday.is_closed==1?"disabled":"" %>>
                                            <div class="open_time_div_0 error"></div>
                                    </div>

                                    <div class="col-lg-5">
                                        <label class="control-label col-lg-12">Close Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="sunday" id="close_time_0" class="form-control"
                                            placeholder="Enter close time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Sunday !== 'undefined'?businessObj.Sunday.close_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Sunday !== 'undefined' &&
                                                businessObj.Sunday.is_closed==1?"disabled":"" %>>
                                        <div class="close_time_div_0 error"></div>
                                            <p class="pera_end">
                                                <input id="checkbox_0" name="sunday" class="mycheckbox"  
                                                onchange="closedTime(this,0)" type ="checkbox" name = "is_open" <%= Object.keys(businessObj).length>0 && typeof businessObj.Sunday !== 'undefined' && businessObj.Sunday.is_closed==1?"checked":"" %>> <span>Closed</span>
                                                
                                            </p>
                                            
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label class="control-label col-lg-2">Monday<span
                                        class="text-danger"></span></label>
                                    <div class="col-lg-5">
                                        
                                          
                                        <label class="control-label col-lg-12">Open Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="monday" id="open_time_1" class="form-control"
                                            placeholder="Enter open time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Monday !== 'undefined'?businessObj.Monday.open_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Monday !== 'undefined' &&
                                                businessObj.Monday.is_closed==1?"disabled":"" %>>
                                            <div class="open_time_div_1 error"></div>
                                    </div>
                                    <div class="col-lg-5">
                                        <label class="control-label col-lg-12">Close Time<span
                                            class="text-danger"></span></label>
                                           
                                        <input type="time" name="monday" id="close_time_1" class="form-control"
                                            placeholder="Enter close time" value="<%= Object.keys(businessObj).length>0 &&typeof businessObj.Monday !== 'undefined'?businessObj.Monday.close_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Monday !== 'undefined' &&
                                                businessObj.Monday.is_closed==1?"disabled":"" %>>
                                            <div class="close_time_div_1 error"></div>
                                             <p class="pera_end">
                                                <input id="checkbox_1" name="monday" type ="checkbox"  class="mycheckbox"  onchange="closedTime(this,1)" name = "is_open" <%= Object.keys(businessObj).length>0 && typeof businessObj.Monday !== 'undefined' && businessObj.Monday.is_closed==1?"checked":"" %>> <span>Closed</span>
                                                
                                            </p>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label class="control-label col-lg-2">Tuesday<span
                                        class="text-danger"></span></label>
                                    <div class="col-lg-5">
                                        
                                          
                                        <label class="control-label col-lg-12">Open Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="tuesday" id="open_time_2" class="form-control"
                                            placeholder="Enter open time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Tuesday !== 'undefined'?businessObj.Tuesday.open_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Tuesday !== 'undefined' &&
                                                businessObj.Tuesday.is_closed==1?"disabled":"" %>>
                                            <div class="open_time_div_2 error"></div>
                                    </div>
                                    <div class="col-lg-5">
                                        <label class="control-label col-lg-12">Close Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="tuesday" id="close_time_2" class="form-control"
                                            placeholder="Enter close time" value="<%= Object.keys(businessObj).length>0 &&typeof businessObj.Tuesday !== 'undefined'?businessObj.Tuesday.close_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Tuesday !== 'undefined' &&
                                                businessObj.Tuesday.is_closed==1?"disabled":"" %>>
                                        <div class="close_time_div_2 error"></div>
                                            
                                             <p class="pera_end">
                                                <input id="checkbox_2" name="tuesday" type ="checkbox" class="mycheckbox"  onchange="closedTime(this,2)" name = "is_open" <%= Object.keys(businessObj).length>0 && typeof businessObj.Tuesday !== 'undefined' && businessObj.Tuesday.is_closed==1?"checked":"" %>> <span>Closed</span>
                                                
                                            </p>
                                    </div>
                                   
                                    
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Wednesday<span
                                        class="text-danger"></span></label>
                                    <div class="col-lg-5">
                                        
                                         
                                        <label class="control-label col-lg-12">Open Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="wednesday" id="open_time_3" class="form-control"
                                            placeholder="Enter open time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Wednesday !== 'undefined'?businessObj.Wednesday.open_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Wednesday !== 'undefined' &&
                                                businessObj.Wednesday.is_closed==1?"disabled":"" %>>
                                            <div class="open_time_div_3 error"></div>
                                    </div>
                                    <div class="col-lg-5">
                                        <label class="control-label col-lg-12">Close Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="wednesday" id="close_time_3" class="form-control"
                                            placeholder="Enter close time"  value="<%= Object.keys(businessObj).length>0 &&typeof businessObj.Wednesday !== 'undefined'?businessObj.Wednesday.close_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Wednesday !== 'undefined' &&
                                                businessObj.Wednesday.is_closed==1?"disabled":"" %>>
                                        <div class="close_time_div_3 error"></div>
                                            
                                             <p class="pera_end">
                                                <input type ="checkbox" name="wednesday" id="checkbox_3" class="mycheckbox"  onchange="closedTime(this,3)" name = "is_open" <%= Object.keys(businessObj).length>0 && typeof businessObj.Wednesday !== 'undefined' && businessObj.Wednesday.is_closed==1?"checked":"" %>> <span>Closed</span>
                                                
                                            </p>
                                    </div>
                                   
                                    
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Thursday<span
                                        class="text-danger"></span></label>
                                    <div class="col-lg-5">
                                        
                                           
                                        <label class="control-label col-lg-12">Open Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="thursday" id="open_time_4" class="form-control"
                                            placeholder="Enter open time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Thursday !== 'undefined'?businessObj.Thursday.open_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Thursday !== 'undefined' &&
                                                businessObj.Thursday.is_closed==1?"disabled":"" %>>
                                            <div class="open_time_div_4 error"></div>
                                    </div>
                                    <div class="col-lg-5">
                                        <label class="control-label col-lg-12">Close Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="thursday" id="close_time_4" class="form-control"
                                            placeholder="Enter close time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Thursday !== 'undefined'?businessObj.Thursday.close_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Thursday !== 'undefined' &&
                                                businessObj.Thursday.is_closed==1?"disabled":"" %>>
                                            <div class="close_time_div_4 error"></div>
                                            
                                             <p class="pera_end">
                                                <input type ="checkbox" name="thursday" id="checkbox_4" class="mycheckbox"  onchange="closedTime(this,4)" name = "is_open" <%= Object.keys(businessObj).length>0 && typeof businessObj.Thursday !== 'undefined' && businessObj.Thursday.is_closed==1?"checked":"" %>> <span>Closed</span>
                                                
                                            </p>
                                    </div>
                                   
                                    
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Friday<span
                                        class="text-danger"></span></label>
                                    <div class="col-lg-5">
                                        
                                            
                                        <label class="control-label col-lg-12">Open Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="friday" id="open_time_5" class="form-control"
                                            placeholder="Enter open time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Friday !== 'undefined'?businessObj.Friday.open_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Friday !== 'undefined' &&
                                                businessObj.Friday.is_closed==1?"disabled":"" %>>
                                            <div class="open_time_div_5 error"></div>
                                    </div>
                                    <div class="col-lg-5">
                                        <label class="control-label col-lg-12">Close Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="friday" id="close_time_5" class="form-control"
                                            placeholder="Enter close time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Friday !== 'undefined'?businessObj.Friday.close_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Friday !== 'undefined' &&
                                                businessObj.Friday.is_closed==1?"disabled":"" %>>
                                            <div class="close_time_div_5 error"></div>
                                            
                                             <p class="pera_end">
                                                <input type ="checkbox" name="friday" id="checkbox_5" class="mycheckbox"  onchange="closedTime(this,5)" name = "is_open" <%= Object.keys(businessObj).length>0 && typeof businessObj.Friday !== 'undefined' && businessObj.Friday.is_closed==1?"checked":"" %>> <span>Closed</span>
                                                
                                            </p>
                                    </div>
                                   
                                    
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Saturday<span
                                        class="text-danger"></span></label>
                                    <div class="col-lg-5">
                                        
                                            
                                        <label class="control-label col-lg-12">Open Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="saturday" id="open_time_6" class="form-control"
                                            placeholder="Enter open time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Saturday !== 'undefined'?businessObj.Saturday.open_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Saturday !== 'undefined' &&
                                                businessObj.Saturday.is_closed==1?"disabled":"" %>>
                                            <div class="open_time_div_6 error"></div>
                                    </div>
                                    <div class="col-lg-5">
                                        <label class="control-label col-lg-12">Close Time<span
                                            class="text-danger"></span></label>
                                        <input type="time" name="saturday" id="close_time_6" class="form-control"
                                            placeholder="Enter close time" value="<%= Object.keys(businessObj).length>0 && typeof businessObj.Saturday !== 'undefined'?businessObj.Saturday.close_time:"" %>" <%= Object.keys(businessObj).length>0 && typeof businessObj.Saturday !== 'undefined' &&
                                                businessObj.Saturday.is_closed==1?"disabled":"" %>>
                                            <div class="close_time_div_6 error"></div>
                                            
                                           <p class="pera_end">
                                                <input type ="checkbox" name="saturday" id="checkbox_6" class="mycheckbox"  onchange="closedTime(this,6)"  name = "is_open" <%= Object.keys(businessObj).length>0 && typeof businessObj.Saturday !== 'undefined' && businessObj.Saturday.is_closed==1?"checked":"" %>> <span>Closed</span>
                                                
                                            </p>
                                    </div>
                                   
                                    
                                </div>
                                </div>
                                
                                <!-- <div class="form-group addSubRenovationInput addInput"> 
                                    <div class="input-group">
                                        <input type="hidden" class="form-control sub_name" name="no_guest" placeholder=" sub no of guest"> 
                                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
                                        
                                    </div>
                                </div> -->
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Instagram<span
                                            class="text-danger"></span></label>
                                    <div class="col-lg-10">
                                        <input type="url" name="insta" id="insta" value="<%= Object.keys(businessObj).length>0 && businessObj.insta?businessObj.insta:"" %>" class="form-control"
                                            placeholder="Enter instagram link">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Facebook<span
                                            class="text-danger"></span></label>
                                    <div class="col-lg-10">
                                        <input type="url" name="facebook" id="Social_media_link" value="<%= Object.keys(businessObj).length>0 && businessObj.facebook?businessObj.facebook:"" %>" class="form-control"
                                            placeholder="Enter facebook link" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Tik Tok<span
                                            class="text-danger"></span></label>
                                    <div class="col-lg-10">
                                        <input type="url" name="tiktok" id="tiktok" value="<%= Object.keys(businessObj).length>0 && businessObj.tiktok?businessObj.tiktok:"" %>" class="form-control"
                                            placeholder="Enter tiktok link" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">YouTube<span
                                            class="text-danger"></span></label>
                                    <div class="col-lg-10">
                                        <input type="url" name="youtube" value="<%= Object.keys(businessObj).length>0 && businessObj.youtube?businessObj.youtube:"" %>" id="youtube" class="form-control"
                                            placeholder="Enter youtube link" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2">Image<span
                                        class="text-danger">*</span></label>

                                        
                                    <div class="col-lg-10">
                                        <input type="file" class="control-label col-lg-3 form-control" name="images"
                                            accept="image/*"  id="imgInp" multiple>
                                    </div>
                                    <input type="hidden" id="file" value="<%= Object.keys(businessObj).length>0 && businessObj.image?businessObj.image:"" %>">
                                    <!-- <div class="col-sm-5">
                                        img id="blah" src="/download.jpeg" alt="your image" width="50" height="38" /> 
                                    </div> -->
                                </div>

                                



                              
                                <div class="form-group">
                                    <div class="row images-preview-div">
                                        <% for(let i in businessObj.imagesArr){ %>
                                            <div class="col-sm-2 aspect-ratio aspect-ratio-4-3 img-frame text-center ml-5">
                                                <a onclick="closeImage(this,'<%= businessObj.imagesArr[i].id %>')" class="close close_button">
                                                    <span>&times;</span>
                                                </a>
                                                <img class="fit-img fit-img-tight" width=100 height=100 src="/images/<%= businessObj.imagesArr[i].image %>">
                                            </div>
                                        <% } %>
                                    </div>
                                    <!-- <div class="mt-1 text-center"> -->
                                        <!-- <div class="row">
                                            <div class="col-sm-3 ml-3 ">

                                            </div>
                                        </div> -->
                                    <!-- </div>   -->
                                </div>
                                <div class="text-right">
                                        <% if(type === 1 || (type === 4 && permi.indexOf('add') >= 0)) {
                                            if (Object.keys(businessObj).length>0) { %>
                                                <button type="submit" class="btn btn-primary">Update<i class="icon-arrow-right14 position-right"></i></button>
                                            <% }else{
                                            %>
                                    
                                    <button type="submit" class="btn btn-primary">Add</button>
                                <% } }%>
                                <a href="/admin/businesses" style="background-color: #8080808c; color: black;" type="submit"
                                    class="btn btn-secondary">
                                    Back
                                </a>
                                            

                                </div>
                            </fieldset>
                        </form>

        <% if(session.type==1){ %>
            <%-include('../partials/footer')%>
        <%}else{%>
            <%- include ("../subAdmin/partials/footer") %>
        <%}%>

                    </div>
                                <!-- /content area -->

                            </div>
                            <!-- /main content -->

                    </div>
                    <!-- /page content -->

        </div>
    </div>
    </div>
            <!-- /page container -->

</body>

</html>
<script>
    flatpickr("#open_time_0", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#close_time_0", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#open_time_1", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#close_time_1", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#open_time_2", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#close_time_2", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#open_time_3", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#close_time_3", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#open_time_4", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#close_time_4", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#open_time_5", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#close_time_5", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#open_time_6", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    flatpickr("#close_time_6", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
</script>

<script>


    const options = {
                Restrictions : null,
                //   bounds: defaultBounds,
                // componentRestrictions: { country: "in" },
                fields: ["address_components", "geometry", "icon", "name"],
                strictBounds: false,
                // types: ["postal_code"],
                };
    
                
            let inputElements = document.querySelector('#location')
            
            const autocomplete = new google.maps.places.Autocomplete(inputElements, options);
            google.maps.event.addListener(autocomplete, 'place_changed', function () {
            let place = autocomplete.getPlace();
            console.log(place,"place");
            const lat = place.geometry.location.lat();
            const lng = place.geometry.location.lng();
            
            console.log(lat,lng)
            document.getElementById('lat').value = lat;
            document.getElementById('lng').value = lng
    
      
    
    })
                
          // console.log('----------------------------');
          $("#selectCategory").change(function(){
          var categoryID = $("#selectCategory").val()
          var categoryName = $("#selectCategory option:selected").html()
          console.log('categoryID',categoryID,'--name--', categoryName);
          let categoryHtml = `<input type="hidden" name="type" value="${categoryName.trim()}">`;
          $('#addCategory').html(categoryHtml)
        // alert(categoryID);
    
          html=''
          console.log('---------------------html',);
          $.ajax({
            url: '/admin/subcategorywithcategory',
            method: 'POST',
            data: { categoryID },
            success: function (data) {
              console.log('----------------------data', data)
              if(data.sub_list.length == 0)  {
                  document.getElementById('subcategory__').style.display = 'none'; return 
              }else  document.getElementById('subcategory__').style.display = 'block'; 
    
          
              for(let i in data.sub_list){
        
             html+=`<option value="${data.sub_list[i].id}">${data.sub_list[i].name}</option>`
                  }
               
    
            $("#subcategory").html(`<option>Select subCategory</option>`+html);
                
    
            }
    
          });
        });
    
      </script>

    <script>
        function closedTime(elem, index) {
            if(elem.checked==true){
                $(`#open_time_${index}`).val('')
                $(`#close_time_${index}`).val('')
                $(`.open_time_div_${index}`).html("")
                $(`.close_time_div_${index}`).html("")
                $(`#open_time_${index}`).attr('disabled', 'disabled');
                $(`#close_time_${index}`).attr('disabled', 'disabled');
            }else{
                $(`#open_time_${index}`).removeAttr('disabled');
                $(`#close_time_${index}`).removeAttr('disabled');
            }
        }

    </script>        


    <script>
    $("#categoryvalidation").validate({
            ignore: [],
            // Specify validation rules
            rules: {
            pro_id:{
                required:true
            },
            name: {
                required: true,
                noSpace : true
            },

            location: {
                required: true,
                noSpace : true
            },
            description: {
                required: true,
                noSpace : true
            },
            category_id: {
                required: true,
            },
            images:{
                validateFile:true
            },
            
            
            social_media_link: {
                required: true,
                noSpace : true
            },         
        },
        messages: {
                pro_id:{
                    required:"Please select professional"
                },
            name: {
                required: " Please enter business name",
                accept: "Please enter a vaild name "
            },
            
            location: {
                required: " Please enter location",
                accept: "Please enter a vaild location"
            },
            description: {
                required: " Please enter description",
                accept: "Please enter a vaild description "
            },
            category_id:{
                required: " Please select category",
            },
            
            social_media_link: {
                required: " Please enter social media link",
                accept: "Please enter a vaild social media link "
            },
        },


        errorPlacement: function(error, element) {
            if($(element).attr('name')=="category_id"){
                error.appendTo('.category_id_div');
            }else{
                error.insertAfter(element);
            }
        },
        
        submitHandler: function (form) { // for demo
            var a=sunday()
            var b=monday()
            var c=tuesday()
            var d=wednesday()
            var e=thursday()
            var f=friday()
            var g=saturday()
            if(a && b && c && d && e && f && g){
                return true
            }
        }
      
    });

    


    function sunday(){
        if (!$("#checkbox_0").is(":checked")) {
            if ($("#open_time_0").val() == '' && $("#close_time_0").val() == '') {
                $(".open_time_div_0").html("Please enter open time")
                $(".close_time_div_0").html("Please enter close time")
                return false
            }


            if ($("#open_time_0").val() == '') {
                $(".close_time_div_0").html("")
                $(".open_time_div_0").html("Please enter open time")
                return false
            }

            if ($("#close_time_0").val() == '') {
                $(".open_time_div_0").html("")
                $(".close_time_div_0").html("Please enter close time")
                return false
            }


            if ($("#close_time_0").val() < $("#open_time_0").val()) {
                $(".open_time_div_0").html("")
                $(".close_time_div_0").html("Please enter close time greater than open time")
                return false
            }

            $(".open_time_div_0").html("")
            $(".close_time_div_0").html("")
        }
        $(".open_time_div_0").html("")
        $(".close_time_div_0").html("")
        return true
    }

    function monday() {
            if (!$("#checkbox_1").is(":checked")) {
                if ($("#open_time_1").val() == '' && $("#close_time_1").val() == '') {
                    $(".open_time_div_1").html("Please enter open time")
                    $(".close_time_div_1").html("Please enter close time")
                    return false
                }


                if ($("#open_time_1").val() == '') {
                    $(".close_time_div_1").html("")
                    $(".open_time_div_1").html("Please enter open time")
                    return false
                }

                if ($("#close_time_1").val() == '') {
                    $(".open_time_div_1").html("")
                    $(".close_time_div_1").html("Please enter close time")
                    return false
                }


                if ($("#close_time_1").val() < $("#open_time_1").val()) {
                    $(".open_time_div_1").html("")
                    $(".close_time_div_1").html("Please enter close time greater than open time")
                    return false
                }

                $(".open_time_div_1").html("")
                $(".close_time_div_1").html("")
            }
            $(".open_time_div_1").html("")
            $(".close_time_div_1").html("")
            return true
        }

    function tuesday(){
        if (!$("#checkbox_2").is(":checked")) {
            if ($("#open_time_2").val() == '' && $("#close_time_2").val() == '') {
                $(".open_time_div_2").html("Please enter open time")
                $(".close_time_div_2").html("Please enter close time")
                return false
            }


            if ($("#open_time_2").val() == '') {
                $(".close_time_div_2").html("")
                $(".open_time_div_2").html("Please enter open time")
                return false
            }

            if ($("#close_time_2").val() == '') {
                $(".open_time_div_2").html("")
                $(".close_time_div_2").html("Please enter close time")
                return false
            }


            if ($("#close_time_2").val() < $("#open_time_2").val()) {
                $(".open_time_div_2").html("")
                $(".close_time_div_2").html("Please enter close time greater than open time")
                return false
            }

            $(".open_time_div_2").html("")
            $(".close_time_div_2").html("")
        }
        $(".open_time_div_2").html("")
        $(".close_time_div_2").html("")
        return true
    }

    function wednesday() {
            if (!$("#checkbox_3").is(":checked")) {
                if ($("#open_time_3").val() == '' && $("#close_time_3").val() == '') {
                    $(".open_time_div_3").html("Please enter open time")
                    $(".close_time_div_3").html("Please enter close time")
                    return false
                }


                if ($("#open_time_3").val() == '') {
                    $(".close_time_div_3").html("")
                    $(".open_time_div_3").html("Please enter open time")
                    return false
                }

                if ($("#close_time_3").val() == '') {
                    $(".open_time_div_3").html("")
                    $(".close_time_div_3").html("Please enter close time")
                    return false
                }


                if ($("#close_time_3").val() < $("#open_time_0").val()) {
                    $(".open_time_div_3").html("")
                    $(".close_time_div_3").html("Please enter close time greater than open time")
                    return false
                }

                $(".open_time_div_3").html("")
                $(".close_time_div_3").html("")
            }
            $(".open_time_div_3").html("")
            $(".close_time_div_3").html("")
            return true
        }

        function thursday() {
                if (!$("#checkbox_4").is(":checked")) {
                    if ($("#open_time_4").val() == '' && $("#close_time_4").val() == '') {
                        $(".open_time_div_4").html("Please enter open time")
                        $(".close_time_div_4").html("Please enter close time")
                        return false
                    }


                    if ($("#open_time_4").val() == '') {
                        $(".close_time_div_4").html("")
                        $(".open_time_div_4").html("Please enter open time")
                        return false
                    }

                    if ($("#close_time_4").val() == '') {
                        $(".open_time_div_4").html("")
                        $(".close_time_div_4").html("Please enter close time")
                        return false
                    }


                    if ($("#close_time_4").val() < $("#open_time_4").val()) {
                        $(".open_time_div_4").html("")
                        $(".close_time_div_4").html("Please enter close time greater than open time")
                        return false
                    }

                    $(".open_time_div_4").html("")
                    $(".close_time_div_4").html("")
                }
                $(".open_time_div_4").html("")
                $(".close_time_div_4").html("")
                return true
            }


            function friday() {
                    if (!$("#checkbox_5").is(":checked")) {
                        if ($("#open_time_5").val() == '' && $("#close_time_5").val() == '') {
                            $(".open_time_div_5").html("Please enter open time")
                            $(".close_time_div_5").html("Please enter close time")
                            return false
                        }


                        if ($("#open_time_5").val() == '') {
                            $(".close_time_div_5").html("")
                            $(".open_time_div_5").html("Please enter open time")
                            return false
                        }

                        if ($("#close_time_5").val() == '') {
                            $(".open_time_div_5").html("")
                            $(".close_time_div_5").html("Please enter close time")
                            return false
                        }


                        if ($("#close_time_5").val() < $("#open_time_5").val()) {
                            $(".open_time_div_5").html("")
                            $(".close_time_div_5").html("Please enter close time greater than open time")
                            return false
                        }

                        $(".open_time_div_5").html("")
                        $(".close_time_div_5").html("")
                    }
                    $(".open_time_div_5").html("")
                    $(".close_time_div_5").html("")
                    return true
                }

                function saturday() {
                        if (!$("#checkbox_6").is(":checked")) {
                            if ($("#open_time_6").val() == '' && $("#close_time_6").val() == '') {
                                $(".open_time_div_6").html("Please enter open time")
                                $(".close_time_div_6").html("Please enter close time")
                                return false
                            }


                            if ($("#open_time_6").val() == '') {
                                $(".close_time_div_6").html("")
                                $(".open_time_div_6").html("Please enter open time")
                                return false
                            }

                            if ($("#close_time_6").val() == '') {
                                $(".open_time_div_6").html("")
                                $(".close_time_div_6").html("Please enter close time")
                                return false
                            }


                            if ($("#close_time_6").val() < $("#open_time_6").val()) {
                                $(".open_time_div_6").html("")
                                $(".close_time_div_6").html("Please enter close time greater than open time")
                                return false
                            }

                            $(".open_time_div_6").html("")
                            $(".close_time_div_6").html("")
                        }
                        $(".open_time_div_6").html("")
                        $(".close_time_div_6").html("")
                        return true
                    }


    






    // $(document).ready(function () {
         
      jQuery.validator.addMethod("noSpace", function(value, element) {
        return value == '' || value.trim().length != 0;
      }, "Space shouldn't be allowed");


      $.validator.addMethod(
            "validateFile",
            function (value, element) {
                var fileData = $("#file").val();
                if (fileData=="true" || value != "") {
                    return true;
                }
            },
            "Please select image"
        );

        $.validator.addMethod(
                "validateTime",
                function (value, element) {
                    console.log(value)
                    console.log(element)
                },
                "Please select image"
            );



             $.validator.addMethod(
                    "sundayValid",
                    function (value, element) {
                        var id=element.id
                        var idsArr=id.split("_")
                    if($(`#open_time_${idsArr[2]}`).val()=='' && $(`#close_time_${idsArr[2]}`).val()==''){
                        $(".open_time_div_0").html("Please enter open time")
                        $(".close_time_div_0").html("Please enter close time")
                        return false
                    }else if($(`#open_time_${idsArr[2]}`).val() == ''){
                        $(".open_time_div_0").html("Please enter open time")
                        return false
                    }else if($(`#close_time_${idsArr[2]}`).val() == ''){
                        $(".close_time_div_0").html("Please enter close time")
                        return false
                    }else{
                        $(".open_time_div_0").html("")
                        $(".close_time_div_0").html("")
                        return true
                    }
                },"");
            

            


            
    

    //   $("#register-form").validate({
     
    
    </script> 

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script >

    $(document).ready(function () {
    $('.js-example-basic-multiple').select2();
});


    $(function() {
    // Multiple images preview with JavaScript
        var previewImages = function(input, imgPreviewPlaceholder) {
            if (input.files) {
            var filesAmount = input.files.length;
                for (let i = 0; i < filesAmount; i++) {
                    var reader = new FileReader();
                    reader.onload = function(event) {
                    var html=`<div id="image_div_${i}" class="col-sm-2 aspect-ratio aspect-ratio-4-3 img-frame text-center ml-5"><img class="fit-img fit-img-tight" width=100 height=100 src="${event.target.result}"></div>`
                    $(".images-preview-div").append(html)
                        // $($.parseHTML('<img width=50 style="border-radius:15px;">')).attr('src', event.target.result).appendTo(imgPreviewPlaceholder);
                    }
                    reader.readAsDataURL(input.files[i]);
                }
            }
        };
        $('#imgInp').on('change', function() {
            previewImages(this, 'div.images-preview-div');
        });
    });

    function closeSelectedImage(index) {
        $(`#image_div_${index}`).remove()
    }


    function closeImage(elem,id){
        $.ajax({
            type: "POST",
            url: "/businesses/deleteImages",
            data:{id:id},
            // dataType: "json",
            success: function (result) {
                if(result){
                    $('.images-preview-div').load(' .images-preview-div')
                }
            }
        });
    }
    </script>

    // <script type="text/javascript">
    //     $(document).ready(function () {

// //     $('#addSubRenovation').click(function () {
// //     let html = ``;
// //         html += `&nbsp;
        

// //             <div class="form-group">
// //                 <label class="control-label col-lg-2">Open Time<span
// //                         class="text-danger"></span></label>
// //                 <div class="col-lg-10">
// //                     <input type="time" name="open_time" id="open_time" class="form-control"
// //                         placeholder="Enter open time" >
// //                         <label class="control-label col-lg-2">Please check if you want this day to be close<span
// //                         class="text-danger"></span></label>
// //                         <input type ="checkbox" name = "is_open">
// //                 </div>
// //             </div>
// //             <div class="form-group">
// //                 <label class="control-label col-lg-2">Close Time<span
// //                         class="text-danger"></span></label>
// //                 <div class="col-lg-10">
// //                     <input type="time" name="close_time" id="close_time" class="form-control"
// //                         placeholder="Enter close time" >
                        
// //                 </div>
// //             </div>
            
// //             <div class="input-group-prepend delBtn">
// //             <div class="input-group-text" style="color: red;">
// //                 <i class="fa fa-trash" >Remove</i>
// //             </div>
// //             </div>
// //             <div class="invalid-feedback">
// //             Please fill in required fields
// //             </div>`;

// //     $(".addSubRenovationInput").append(html);
// //     })

// //     $(document).on('click','.delBtn',function () {
// //     console.log('i am clicked')
// //     console.log($(this).parent('div'),'---$(this).parent(div)--');
// //     $(this).parent('div').remove();
// //     })

// //     });

// //     // ================================================================

// //     $(document).ready(function() {
// //     $('.js-example-basic-multiple').select2();
// // });
//     </script>



// <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
// <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>